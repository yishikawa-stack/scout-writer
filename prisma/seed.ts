// ã‚·ãƒ¼ãƒ‰ãƒ‡ãƒ¼ã‚¿ï¼ˆãƒ‡ãƒ¢ç”¨ã®åˆæœŸãƒ‡ãƒ¼ã‚¿ï¼‰
// ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€ãƒ‡ãƒ¢ç”¨ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ»ä¼æ¥­ãƒ»å­¦ç”Ÿãƒ‡ãƒ¼ã‚¿ãŒä½œæˆã•ã‚Œã¾ã™

import { PrismaClient } from "@prisma/client";
import { PrismaLibSql } from "@prisma/adapter-libsql";
import { createClient } from "@libsql/client";
import bcrypt from "bcryptjs";

// Prisma 7ã®driver adaptersãƒ‘ã‚¿ãƒ¼ãƒ³ã§SQLiteã«æŽ¥ç¶š
const adapter = new PrismaLibSql({
    url: "file:./dev.db",
});
const prisma = new PrismaClient({ adapter });

async function main() {
    console.log("ðŸŒ± ã‚·ãƒ¼ãƒ‰ãƒ‡ãƒ¼ã‚¿ã‚’ä½œæˆä¸­...");

    // 1. ãƒ‡ãƒ¢ç”¨ä¼æ¥­ã‚’ä½œæˆ
    const company = await prisma.company.upsert({
        where: { id: 1 },
        update: {
            name: "æ–‡å­—ã‚’è¨˜å…¥",
            shortName: "æ–‡å­—ã‚’è¨˜å…¥",
            recruiterSignature: "æ ªå¼ä¼šç¤¾ã€‡ã€‡ æŽ¡ç”¨æ‹…å½“ã®ã€‡ã€‡ã§ã™ï¼",
            description: "æ–‡å­—ã‚’è¨˜å…¥",
            features: JSON.stringify(["æ–‡å­—ã‚’è¨˜å…¥"]),
            commonPositions: JSON.stringify(["æ–‡å­—ã‚’è¨˜å…¥"]),
            idealCandidateBullets: JSON.stringify(["æ–‡å­—ã‚’è¨˜å…¥"]),
            selectionFlowText: "æ–‡å­—ã‚’è¨˜å…¥",
            offerSpeedText: "æ–‡å­—ã‚’è¨˜å…¥",
        },
        create: {
            name: "æ–‡å­—ã‚’è¨˜å…¥",
            shortName: "æ–‡å­—ã‚’è¨˜å…¥",
            recruiterSignature: "æ ªå¼ä¼šç¤¾ã€‡ã€‡ æŽ¡ç”¨æ‹…å½“ã®ã€‡ã€‡ã§ã™ï¼",
            description: "æ–‡å­—ã‚’è¨˜å…¥",
            features: JSON.stringify(["æ–‡å­—ã‚’è¨˜å…¥"]),
            commonPositions: JSON.stringify(["æ–‡å­—ã‚’è¨˜å…¥"]),
            idealCandidateBullets: JSON.stringify(["æ–‡å­—ã‚’è¨˜å…¥"]),
            selectionFlowText: "æ–‡å­—ã‚’è¨˜å…¥",
            offerSpeedText: "æ–‡å­—ã‚’è¨˜å…¥",
        },
    });
    console.log("âœ… ä¼æ¥­ã‚’ä½œæˆã—ã¾ã—ãŸ:", company.name);

    // 2. ãƒ‡ãƒ¢ç”¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ä½œæˆï¼ˆãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰: demo1234ï¼‰
    const hashedPassword = await bcrypt.hash("demo1234", 10);
    const user = await prisma.user.upsert({
        where: { email: "demo@example.com" },
        update: {},
        create: {
            companyId: company.id,
            name: "å±±å£ å¤ªéƒŽ",
            email: "demo@example.com",
            passwordHash: hashedPassword,
            role: "admin",
        },
    });
    console.log("âœ… ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ä½œæˆã—ã¾ã—ãŸ:", user.email);

    // 3. ãƒ‡ãƒ¢ç”¨ãƒã‚¸ã‚·ãƒ§ãƒ³ã‚’ä½œæˆ
    const position = await prisma.position.upsert({
        where: { id: 1 },
        update: {},
        create: {
            companyId: company.id,
            name: "ã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³å–¶æ¥­è·",
            summary:
                "ä¸­å°ä¼æ¥­å‘ã‘ã®YouTubeãƒ»Instagramåºƒå‘Šã®ã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ææ¡ˆå–¶æ¥­ã§ã™ã€‚ãŠå®¢æ§˜ã®é›†å®¢èª²é¡Œã‚’ãƒ’ã‚¢ãƒªãƒ³ã‚°ã—ã€æœ€é©ãªåºƒå‘Šæˆ¦ç•¥ã‚’ææ¡ˆã—ã¾ã™ã€‚",
            duties: JSON.stringify([
                "æ–°è¦é¡§å®¢ã®ãƒªã‚¹ãƒˆã‚¢ãƒƒãƒ—",
                "æ–°è¦é¡§å®¢é–‹æ‹“ã®ãŸã‚ã®ãƒ†ãƒ¬ã‚¢ãƒæ¥­å‹™",
                "ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ã«ã¦é›†å®¢èª²é¡Œã®ãƒ’ã‚¢ãƒªãƒ³ã‚°ãƒ»ææ¡ˆ",
                "æ—¢å­˜é¡§å®¢ã®ãƒ•ã‚©ãƒ­ãƒ¼ã‚¢ãƒƒãƒ—",
                "SNSåºƒå‘Šã®é‹ç”¨ã‚µãƒãƒ¼ãƒˆ",
            ]),
            requirements: JSON.stringify([
                "ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³åŠ›",
                "ä¸»ä½“æ€§",
                "æˆé•·æ„æ¬²",
                "ãƒãƒ£ãƒ¬ãƒ³ã‚¸ç²¾ç¥ž",
            ]),
            isActive: true,
        },
    });
    console.log("âœ… ãƒã‚¸ã‚·ãƒ§ãƒ³ã‚’ä½œæˆã—ã¾ã—ãŸ:", position.name);

    // 4. ãƒ‡ãƒ¢ç”¨å­¦ç”Ÿã‚’ä½œæˆ
    const student1 = await prisma.student.upsert({
        where: { id: 1 },
        update: {},
        create: {
            companyId: company.id,
            name: "å±±ç”° å¤ªéƒŽ",
            nameKana: "ãƒ¤ãƒžãƒ€ ã‚¿ãƒ­ã‚¦",
            university: "æ—©ç¨²ç”°å¤§å­¦",
            faculty: "å•†å­¦éƒ¨",
            notes: "ä½“è‚²ä¼šã‚µãƒƒã‚«ãƒ¼éƒ¨æ‰€å±žã€‚å‰¯ã‚­ãƒ£ãƒ—ãƒ†ãƒ³ã¨ã—ã¦ãƒãƒ¼ãƒ ã‚’ç‰½å¼•ã€‚",
            strengthTags: JSON.stringify([
                "ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—",
                "ã‚„ã‚Šåˆ‡ã‚‹åŠ›",
                "ãƒãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯",
            ]),
            valueText:
                "ã€Œå‘¨å›²ã‚’å·»ãè¾¼ã¿ãªãŒã‚‰ç›®æ¨™ã‚’é”æˆã™ã‚‹ã“ã¨ã€ã‚’å¤§åˆ‡ã«ã—ã¦ã„ã¾ã™ã€‚ã‚µãƒƒã‚«ãƒ¼éƒ¨ã§ã®çµŒé¨“ã‹ã‚‰ã€å€‹äººã®åŠ›ã ã‘ã§ãªããƒãƒ¼ãƒ å…¨ä½“ã§æˆæžœã‚’å‡ºã™ã“ã¨ã®é‡è¦æ€§ã‚’å­¦ã³ã¾ã—ãŸã€‚",
        },
    });

    // å­¦ç”Ÿ1ã®ã‚¨ãƒ”ã‚½ãƒ¼ãƒ‰ã‚’ä½œæˆ
    await prisma.studentEpisode.upsert({
        where: { id: 1 },
        update: {},
        create: {
            studentId: student1.id,
            title: "ä½“è‚²ä¼šã‚µãƒƒã‚«ãƒ¼éƒ¨ã®å‰¯ã‚­ãƒ£ãƒ—ãƒ†ãƒ³ã¨ã—ã¦ãƒãƒ¼ãƒ å†å»ºã‚’ä¸»å°Ž",
            detail:
                "å¤§å­¦2å¹´ç”Ÿã®æ™‚ã€ãƒãƒ¼ãƒ ã¯2éƒ¨ãƒªãƒ¼ã‚°ã«é™æ ¼ã—ã€éƒ¨å“¡ã®ãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ã‚‚ä½Žä¸‹ã—ã¦ã„ã¾ã—ãŸã€‚å‰¯ã‚­ãƒ£ãƒ—ãƒ†ãƒ³ã«å°±ä»»ã—ãŸç§ã¯ã€ã¾ãš1on1ã§å…¨éƒ¨å“¡ã¨å¯¾è©±ã—ã€å€‹ã€…ã®èª²é¡Œã¨ç›®æ¨™ã‚’æŠŠæ¡ã€‚ãã®å¾Œã€é€±æ¬¡ã®ãƒŸãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚’å°Žå…¥ã—ã€ãƒãƒ¼ãƒ ã®ç›®æ¨™ã‚’ã€Œ1å¹´ä»¥å†…ã®1éƒ¨æ˜‡æ ¼ã€ã«è¨­å®šã—ã¾ã—ãŸã€‚ç·´ç¿’ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®è¦‹ç›´ã—ã‚„ã€ãƒãƒ¼ãƒ å†…ã§ã®ãƒã‚¸ãƒ†ã‚£ãƒ–ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯æ–‡åŒ–ã®é†¸æˆã«å–ã‚Šçµ„ã‚“ã çµæžœã€1å¹´ã§1éƒ¨ãƒªãƒ¼ã‚°ã¸ã®æ˜‡æ ¼ã‚’é”æˆã—ã¾ã—ãŸã€‚",
            abstractComment:
                "é€†å¢ƒã®ä¸­ã§ã‚‚å‘¨å›²ã‚’å·»ãè¾¼ã¿ãªãŒã‚‰ç›®æ¨™é”æˆã«å‘ã‘ã¦å‹•ã‘ã‚‹ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—ã‚’ç™ºæ®ã§ãã¾ã™",
            achievementText: "2éƒ¨ãƒªãƒ¼ã‚°ã‹ã‚‰1éƒ¨ãƒªãƒ¼ã‚°ã¸æ˜‡æ ¼ã‚’é”æˆ",
            tags: JSON.stringify(["ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—", "ç²˜ã‚Šå¼·ã•", "ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³"]),
        },
    });
    console.log("âœ… å­¦ç”Ÿã‚’ä½œæˆã—ã¾ã—ãŸ:", student1.name);

    // å­¦ç”Ÿ2
    const student2 = await prisma.student.upsert({
        where: { id: 2 },
        update: {},
        create: {
            companyId: company.id,
            name: "ä½è—¤ èŠ±å­",
            nameKana: "ã‚µãƒˆã‚¦ ãƒãƒŠã‚³",
            university: "æ…¶æ‡‰ç¾©å¡¾å¤§å­¦",
            faculty: "çµŒæ¸ˆå­¦éƒ¨",
            notes: "å­¦ç”Ÿå›£ä½“ã®ä»£è¡¨ã¨ã—ã¦ã‚¤ãƒ™ãƒ³ãƒˆé‹å–¶ã‚’çµŒé¨“ã€‚",
            strengthTags: JSON.stringify(["ä¼ç”»åŠ›", "å®Ÿè¡ŒåŠ›", "ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³"]),
            valueText:
                "ã€Œã‚¼ãƒ­ã‹ã‚‰ä¾¡å€¤ã‚’ç”Ÿã¿å‡ºã™ã“ã¨ã€ã«ã‚„ã‚ŠãŒã„ã‚’æ„Ÿã˜ã¾ã™ã€‚å­¦ç”Ÿå›£ä½“ã§ã®æ´»å‹•ã‚’é€šã˜ã¦ã€ã‚¢ã‚¤ãƒ‡ã‚¢ã‚’å½¢ã«ã™ã‚‹æ¥½ã—ã•ã‚’çŸ¥ã‚Šã¾ã—ãŸã€‚",
        },
    });

    await prisma.studentEpisode.upsert({
        where: { id: 2 },
        update: {},
        create: {
            studentId: student2.id,
            title: "å­¦ç”Ÿå›£ä½“ã§500äººè¦æ¨¡ã®ã‚­ãƒ£ãƒªã‚¢ã‚¤ãƒ™ãƒ³ãƒˆã‚’ä¼ç”»ãƒ»é‹å–¶",
            detail:
                "å°±æ´»ç”Ÿå‘ã‘ã®ã‚­ãƒ£ãƒªã‚¢ã‚¤ãƒ™ãƒ³ãƒˆã‚’ä¼ç”»ã—ã€ä»£è¡¨ã¨ã—ã¦é‹å–¶ã—ã¾ã—ãŸã€‚ä¼æ¥­ã¸ã®å–¶æ¥­æ´»å‹•ã‹ã‚‰å§‹ã‚ã€æœ€çµ‚çš„ã«15ç¤¾ã®å”è³›ä¼æ¥­ã‚’ç²å¾—ã€‚é›†å®¢ã¯SNSãƒžãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°ã‚’æ´»ç”¨ã—ã€ç›®æ¨™ã®500åã‚’é”æˆã—ã¾ã—ãŸã€‚å½“æ—¥ã¯å¸ä¼šã‚‚å‹™ã‚ã€ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆã§ã¯å‚åŠ è€…æº€è¶³åº¦95%ã‚’è¨˜éŒ²ã—ã¾ã—ãŸã€‚",
            abstractComment:
                "ã‚¼ãƒ­ã‹ã‚‰ã‚¤ãƒ™ãƒ³ãƒˆã‚’ä¼ç”»ã—ã€å¤šãã®ã‚¹ãƒ†ãƒ¼ã‚¯ãƒ›ãƒ«ãƒ€ãƒ¼ã‚’å·»ãè¾¼ã¿ãªãŒã‚‰æˆåŠŸã«å°Žãå®Ÿè¡ŒåŠ›ãŒã‚ã‚Šã¾ã™",
            achievementText: "500åå‚åŠ ã€æº€è¶³åº¦95%ã€å”è³›ä¼æ¥­15ç¤¾ç²å¾—",
            tags: JSON.stringify(["ä¼ç”»åŠ›", "å–¶æ¥­åŠ›", "ãƒžãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°"]),
        },
    });
    console.log("âœ… å­¦ç”Ÿã‚’ä½œæˆã—ã¾ã—ãŸ:", student2.name);

    console.log("\nðŸŽ‰ ã‚·ãƒ¼ãƒ‰ãƒ‡ãƒ¼ã‚¿ã®ä½œæˆãŒå®Œäº†ã—ã¾ã—ãŸï¼");
    console.log("\nðŸ“ ãƒ­ã‚°ã‚¤ãƒ³æƒ…å ±:");
    console.log("   ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹: demo@example.com");
    console.log("   ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰: demo1234");
}

main()
    .catch((e) => {
        console.error("âŒ ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ:", e);
        process.exit(1);
    })
    .finally(async () => {
        await prisma.$disconnect();
    });
